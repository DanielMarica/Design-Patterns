<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semaine 1 - Observer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Semaine 1</h1>
            <p>Observer</p>
 
        </header>

        <nav>
            <a href="index.html">Accueil</a>
            <a href="theory.html">Th√©orie</a>
        </nav>

        <main>
            <h2>Exercice : Pattern Observer</h2>
            <p><strong>Description :</strong> Impl√©mentation du pattern Observer pour la gestion de notifications entre objets.</p>
            <p><strong>Pattern utilis√© :</strong> Observer</p>
             <hr>

            <section>
                <h2>Observer Pattern</h2>
                <h3>Th√©orie</h3>
                <h4>Comment le reconna√Ætre ?</h4>
                <p>
                    Je reconnais <strong>Observer</strong> gr√¢ce √† une <strong>liste d'observers</strong> (ex : <code>List&lt;Observer&gt;</code>) et aux m√©thodes <strong>attach()</strong>, <strong>detach()</strong> et <strong>notify()</strong>. Le Subject appelle <code>observer.update()</code> sur tous les observers via une boucle <code>for</code> pour les notifier d'un changement.
                </p>
                <figure style="text-align:center;">
                    <img src="assets/th/observer.png" alt="Observer UML Diagram (Th√©orie)" style="max-width: 100%; height: auto; border: 1px solid #ccc; box-shadow: 2px 2px 8px #eee;">
                    <figcaption>Figure : Diagramme UML du pattern Observer (Th√©orie)</figcaption>
                </figure>
                <h3>Exercice</h3>
                <figure style="text-align:center;">
                    <img src="assets/exos/Observer.png" alt="Observer UML Diagram (Exercice)" style="max-width: 100%; height: auto; border: 1px solid #ccc; box-shadow: 2px 2px 8px #eee;">
                    <figcaption>Figure : Diagramme UML du pattern Observer (Exercice)</figcaption>
                </figure>

            </section>

            <hr>

            <h2>Code Principal</h2>
            <p>Copiez chaque bloc individuellement pour construire votre solution.</p>
            
            <div class="code-block" style="background-color: #f4f4f4; border: 1px solid #999; margin-bottom: 15px; padding: 10px;">
                <div class="code-header" style="font-weight: bold; border-bottom: 1px solid #ccc; margin-bottom: 5px;">
                    üìÑ 1. L'interface (Observer.java)
                </div>
                <pre><code>public interface Observer {
    void traiterLigne(String ligne); // √âquivalent de update()
    void afficherLigne();
}</code></pre>
            </div>

            <div class="code-block" style="background-color: #f4f4f4; border: 1px solid #999; margin-bottom: 15px; padding: 10px;">
                <div class="code-header" style="font-weight: bold; border-bottom: 1px solid #ccc; margin-bottom: 5px;">
                    üì¢ 2. Le Sujet (Subject.java)
                </div>
                <pre><code>import java.util.ArrayList;
import java.util.List;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class Subject {
    private List&lt;Observer&gt; observateurs = new ArrayList&lt;&gt;();

    public void registerObserver(Observer o) {
        observateurs.add(o);
    }

    // La m√©thode magique qui pr√©vient tout le monde
    private void notifyObservers(String ligne) {
        for (Observer o : observateurs) {
            o.traiterLigne(ligne);
        }
    }

    public void analyserFichier(String cheminFichier) {
        BufferedReader lecteur = null;
        try {
            lecteur = new BufferedReader(new FileReader(cheminFichier));
            String ligne;
            while ((ligne = lecteur.readLine()) != null) {
                notifyObservers(ligne); // &lt;-- √Ä chaque ligne, on notifie !
            }
            for (Observer o : observateurs) o.afficherLigne();
            lecteur.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code></pre>
            </div>

            <div class="code-block" style="background-color: #f4f4f4; border: 1px solid #999; margin-bottom: 15px; padding: 10px;">
                <div class="code-header" style="font-weight: bold; border-bottom: 1px solid #ccc; margin-bottom: 5px;">
                    ü§ñ 3. Les Observateurs Concrets
                </div>
                <pre><code>// CLASSE : NombreLigne.java
public class NombreLigne implements Observer {
    private int nbrLignes = 0;
    public void traiterLigne(String ligne) { nbrLignes++; }
    public void afficherLigne() { System.out.println("Lignes : " + nbrLignes); }
}

// CLASSE : NombrePalindrome.java
public class NombrePalindrome implements Observer {
    private int nbrPalindromes = 0;
    
    public void traiterLigne(String ligne) {
        for (String mot : ligne.trim().split(" ")) {
            if (!mot.isEmpty()) {
                StringBuffer temp = new StringBuffer(mot);
                if (mot.equals(temp.reverse().toString())) {
                    nbrPalindromes++;
                }
            }
        }
    }
    public void afficherLigne() { System.out.println("Palindromes : " + nbrPalindromes); }
}</code></pre>
            </div>

            <div class="code-block" style="background-color: #f4f4f4; border: 1px solid #999; margin-bottom: 15px; padding: 10px;">
                <div class="code-header" style="font-weight: bold; border-bottom: 1px solid #ccc; margin-bottom: 5px;">
                    üöÄ 4. Le Client (Main.java)
                </div>
                <pre><code>public class Main {
    public static void main(String[] args) {
        Subject analyseur = new Subject();

        // On "branche" les modules qu'on veut utiliser
        analyseur.registerObserver(new NombreLigne());
        analyseur.registerObserver(new NombrePalindrome());

        analyseur.analyserFichier("test.txt");
    }
}</code></pre>
            </div>

            <hr>

            <section class="explanation-box">
                <h2>MEMO Technique : Analogies Simples</h2>
                <p>Voici une explication avec des phrases tr√®s simples et des analogies de la vie de tous les jours.</p>

                <h3>1. Strategy = Faire un CHOIX (C'est "l'un OU l'autre")</h3>
                <p>Imaginez que vous utilisez un GPS pour aller quelque part. Le GPS vous demande : <em>"Quel itin√©raire voulez-vous ?"</em></p>
                <ul>
                    <li>Option A : Le plus rapide.</li>
                    <li>Option B : Le plus court.</li>
                    <li>Option C : Sans p√©age.</li>
                </ul>
                <p>Vous devez en <strong>choisir une seule</strong>. Vous ne pouvez pas prendre la route la plus rapide ET la route sans p√©age en m√™me temps si ce sont deux chemins diff√©rents.</p>
                <p><strong>Dans le code :</strong> Le pattern Strategy sert √† choisir <em>une seule fa√ßon</em> de faire quelque chose √† un moment donn√©.</p>
                <p><strong>Pourquoi √ßa ne va pas pour vous :</strong> Si vous utilisiez Strategy, votre analyseur ferait soit le comptage des lignes, soit la recherche de palindromes, mais pas les deux en m√™me temps.</p>

                <h3>2. Observer = Une R√âACTION (C'est "TOUS ensemble")</h3>
                <p>Imaginez que vous √™tes le professeur (le Sujet) dans une classe. Vous dites √† voix haute : <em>"Sortez vos cahiers !"</em> (L'√©v√©nement).</p>
                <ul>
                    <li>L'√©l√®ve A sort son cahier bleu.</li>
                    <li>L'√©l√®ve B sort son cahier rouge.</li>
                    <li>L'√©l√®ve C arr√™te de dormir et sort son classeur.</li>
                </ul>
                <p>Vous avez parl√© <strong>une seule fois</strong>, mais <strong>plusieurs personnes</strong> ont r√©agi chacune √† leur mani√®re, <strong>en m√™me temps</strong>.</p>
                <p><strong>Dans le code :</strong> Le pattern Observer sert √† pr√©venir plusieurs objets qu'il vient de se passer quelque chose (une ligne a √©t√© lue) pour qu'ils travaillent tous dessus.</p>
                <p><strong>Pourquoi c'est parfait pour vous :</strong> Quand le <code>Subject</code> lit une ligne, il "crie" √† ses abonn√©s : <em>"J'ai lu une ligne !"</em>. Le compteur de mots compte, le d√©tecteur de palindromes cherche... Ils travaillent tous en parall√®le sur la m√™me ligne.</p>

                <h3>En r√©sum√© : La diff√©rence cl√©</h3>
                <table border="1" cellpadding="10" cellspacing="0" style="width:100%; border-collapse: collapse; text-align: left; background-color: #fff;">
                    <tr style="background-color: #e0e0e0;">
                        <th>Pattern</th>
                        <th>Mot-cl√©</th>
                        <th>Logique</th>
                        <th>Exemple Simple</th>
                    </tr>
                    <tr>
                        <td><strong>Strategy</strong></td>
                        <td>Remplacer</td>
                        <td>Je veux faire √ßa <strong>OU</strong> √ßa.</td>
                        <td>Changer d'arme dans un jeu vid√©o (√âp√©e ou Arc).</td>
                    </tr>
                    <tr style="background-color: #e8f4f8;">
                        <td><strong>Observer</strong></td>
                        <td>Notifier</td>
                        <td>Je veux faire √ßa <strong>ET</strong> √ßa.</td>
                        <td>Envoyer un message dans un groupe WhatsApp (Tout le monde le re√ßoit).</td>
                    </tr>
                </table>
                <p>Dans votre <code>AnalyseurDeTexte</code>, comme vous voulez toutes les statistiques √† la fin (lignes ET mots ET palindromes), c'est le <strong>groupe WhatsApp (Observer)</strong> qu'il vous faut, pas le choix de l'arme (Strategy).</p>
            </section>

        </main>
            <div style="margin: 18px 0 0 0; padding: 12px; background: #f7f7f7; border-left: 4px solid #0074d9;">
                <strong>Phrase cl√© Strategy :</strong> Le Context change de strat√©gie. <u>UNE seule active √† la fois.</u><br>
                <strong>Phrase cl√© Observer :</strong> Le Subject notifie <u>TOUS</u> les observers enregistr√©s.
            </div>
            <section style="margin-top: 20px; background: #f9f9f9; border: 2px solid #bbb; padding: 20px;">
                <h2>Comment diff√©rencier Observer et Strategy ?</h2>
                <h3>STRATEGY :</h3>
                <ul>
                    <li>Tu vois <code>private Strategy strategy</code> (pas de List)</li>
                    <li>Tu vois <code>setStrategy()</code> ou injection constructeur</li>
                    <li>Tu vois <code>strategy.method()</code> ‚Üí D√©l√®gue √† 1</li>
                </ul>
                <h3>OBSERVER :</h3>
                <ul>
                    <li>Tu vois <code>List&lt;Observer&gt;</code> ou <code>ArrayList&lt;Observer&gt;</code></li>
                    <li>Tu vois <code>attach()</code>, <code>detach()</code>, <code>notify()</code></li>
                    <li>Tu vois boucle <code>for</code> qui appelle <code>observer.update()</code></li>
                </ul>
            </section>
    </div>
</body>
</html>