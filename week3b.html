<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semaine 3B - Decorator Pattern</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Semaine 3B - Decorator Pattern</h1>
            <p>Exercice Caf√© + Additifs</p>
        </header>

        <nav>
            <a href="index.html">Accueil</a>
            <a href="theory.html">Th√©orie</a>
        </nav>

        <main>
            <h2>üé® Pattern Decorator</h2>
            
            <h3>üìã Description de l'exercice</h3>
            <p>Un syst√®me de caf√© o√π on peut ajouter des additifs (lait, sucre, cr√®me) de mani√®re flexible.</p>
            <p><strong>Probl√®me :</strong> Comment ajouter dynamiquement des fonctionnalit√©s (additifs) √† un caf√© sans cr√©er des centaines de classes ?</p>
            
            <hr>
            
            <h3>‚úÖ Comment reconna√Ætre Decorator</h3>
            
            <div style="background-color: #fafafa; border: 1px solid #ccc; padding: 15px; margin: 20px 0;">
                <p><strong>1. Une classe impl√©mente une interface ET contient un attribut de cette m√™me interface</strong></p>
                <pre>public abstract class Additif implements Boisson {
    private Boisson boisson;  // ‚Üê M√äME type
}</pre>
                
                <p><strong>2. Construction en couches qui finit par le component de base</strong></p>
                <pre>Boisson b = new Lait(new Sucre(new Decafeine()));
//          Decorator  Decorator  Component (PAS null)</pre>
                
                <p><strong>3. Chaque d√©corateur ajoute une fonctionnalit√©</strong></p>
                <pre>public double prix() {
    return 0.10 + super.prix();  // ‚Üê AJOUTE 0.10
}</pre>
            </div>

            <hr>

            <h3>üìä Structure du pattern</h3>
            
            <p><strong>Component :</strong> Boisson (interface)</p>
            <p><strong>ConcreteComponent :</strong> Cafe ‚Üí Decafeine, Moka, Dessert</p>
            <p><strong>Decorator :</strong> Additif (abstract)</p>
            <p><strong>ConcreteDecorator :</strong> Lait, Sucre, Creme</p>

            <hr>

            <h3>üíª Code principal</h3>

            <h4>Component (interface)</h4>
            <pre>public interface Boisson {
    public String getNom(); 
    public double prix();
}</pre>

            <h4>ConcreteComponent</h4>
            <pre>public class Decafeine extends Cafe {
    public Decafeine() {
        super("d√©caf√©in√©");
    }
    
    public double prix() { 
        return 0.40;  // Prix de base
    }
}</pre>

            <h4>Decorator (abstract)</h4>
            <pre>public abstract class Additif implements Boisson {
    private Boisson boisson;  // ‚Üê Contient Boisson
    
    public Additif(Boisson boisson) { 
        this.boisson = boisson;
    }
    
    public double prix() {
        return boisson.prix();  // ‚Üê D√©l√®gue
    }
    
    public String toString() {
        return boisson.toString();
    }
}</pre>

            <h4>ConcreteDecorator</h4>
            <pre>public class Lait extends Additif {
    public Lait(Boisson boisson) { 
        super(boisson);
    }
    
    public double prix() {
        return 0.10 + super.prix();  // ‚Üê AJOUTE 0.10
    }
    
    public String toString() {
        return super.toString() + " au lait";  // ‚Üê AJOUTE texte
    }
}</pre>

            <h4>Utilisation (Main)</h4>
            <pre>public class Main {
    public static void main(String[] args) {
        // Caf√© d√©caf√©in√© avec sucre et lait
        Boisson b = new Lait(new Sucre(new Decafeine()));
        System.out.println(b + " au prix de " + b.prix() + " euros.");
        // R√©sultat : "Caf√© d√©caf√©in√© sucr√© au lait au prix de 0.55 euros"
        
        // Caf√© dessert avec cr√®me et sucre
        b = new Sucre(new Creme(new Dessert()));
        System.out.println(b + " au prix de " + b.prix() + " euros.");
        // R√©sultat : "Caf√© dessert cr√®me sucr√© au prix de 0.57 euros"
    }
}</pre>

            <hr>

            <h3>üîÑ Flow d'ex√©cution</h3>
            
            <pre>Boisson b = new Lait(new Sucre(new Decafeine()));
                               ‚îî‚îÄ 0.40 (Decafeine)
                         ‚îî‚îÄ 0.40 + 0.05 = 0.45 (Sucre)
                   ‚îî‚îÄ 0.45 + 0.10 = 0.55 (Lait)

b.prix() ‚Üí Lait.prix()
             ‚Üí 0.10 + super.prix()
                       ‚Üí Sucre.prix()
                            ‚Üí 0.05 + super.prix()
                                      ‚Üí Decafeine.prix()
                                           ‚Üí 0.40</pre>

            <hr>

            <h3>üìä Tableaux de correspondance</h3>

            <h4>Tableau 1 : Participants th√©oriques ‚Üí Noms dans le code</h4>
            <table>
                <tr>
                    <th>Participants th√©oriques</th>
                    <th>Noms dans le code</th>
                </tr>
                <tr>
                    <td>Component</td>
                    <td>Boisson (interface)</td>
                </tr>
                <tr>
                    <td>ConcreteComponent</td>
                    <td>Cafe (abstract) ‚Üí Decafeine, Moka, Dessert</td>
                </tr>
                <tr>
                    <td>Decorator</td>
                    <td>Additif (abstract)</td>
                </tr>
                <tr>
                    <td>ConcreteDecorator</td>
                    <td>Lait, Sucre, Creme</td>
                </tr>
            </table>

            <h4>Tableau 2 : M√©thodes th√©oriques ‚Üí M√©thodes dans le code</h4>
            <table>
                <tr>
                    <th>M√©thodes th√©oriques</th>
                    <th>M√©thodes dans le code</th>
                </tr>
                <tr>
                    <td>operation()</td>
                    <td>prix(), toString()</td>
                </tr>
            </table>

            <hr>

            <h3>üîç Indices du pattern Decorator</h3>
            
            <ul>
                <li>‚úÖ Classe impl√©mente interface ET contient attribut de cette interface</li>
                <li>‚úÖ <code>private Boisson boisson</code> (m√™me type)</li>
                <li>‚úÖ Construction <code>new Decorator(new Decorator(component))</code></li>
                <li>‚úÖ Finit par component de base (PAS null)</li>
                <li>‚úÖ <code>super.method()</code> + ajout</li>
                <li>‚úÖ Ajoute des fonctionnalit√©s dynamiquement</li>
            </ul>

            <hr>

            <h3>‚ö†Ô∏è Ne pas confondre avec Chain of Responsibility</h3>
            
            <table>
                <tr>
                    <th>Aspect</th>
                    <th>Decorator</th>
                    <th>Chain of Responsibility</th>
                </tr>
                <tr>
                    <td><strong>Finit par</strong></td>
                    <td>Component de base</td>
                    <td>null</td>
                </tr>
                <tr>
                    <td><strong>But</strong></td>
                    <td>Ajouter fonctionnalit√©s</td>
                    <td>Traiter une requ√™te</td>
                </tr>
                <tr>
                    <td><strong>Exemple</strong></td>
                    <td>new Lait(new Decafeine())</td>
                    <td>new Handler(null)</td>
                </tr>
            </table>

            <hr>

            <h3>üí° Points cl√©s</h3>
            
            <p><strong>Avantages du Decorator :</strong></p>
            <ul>
                <li>Ajouter des fonctionnalit√©s sans modifier les classes existantes</li>
                <li>Combinaisons flexibles (Lait + Sucre, ou Cr√®me + Sucre, etc.)</li>
                <li>Respecte le principe Open/Closed</li>
            </ul>

            <p><strong>Quand l'utiliser :</strong></p>
            <ul>
                <li>Besoin d'ajouter des responsabilit√©s dynamiquement</li>
                <li>√âviter l'explosion de sous-classes</li>
                <li>Combinaisons multiples possibles</li>
            </ul>

        </main>

        <footer>
            <p>¬© 2024 Design Patterns Course</p>
        </footer>
    </div>
</body>
</html>