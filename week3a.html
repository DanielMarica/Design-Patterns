<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semaine 3A - Exo A</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Semaine 3A</h1>
            <p>Exercice A</p>
        </header>
        <nav>
            <a href="index.html">Accueil</a>
            <a href="week3.html">Retour Semaine 3</a>
        </nav>
        <main>
        
      
            <h2>Exercice A</h2>

            <section>
                <h3>Diagramme Abstract Factory (Exercice)</h3>
                <figure style="text-align:center;">
                    <img src="assets/exos/AbstractFactory.png" alt="Abstract Factory UML Diagram" style="max-width: 100%; height: auto; border: 1px solid #ccc; box-shadow: 2px 2px 8px #eee;">
                    <figcaption>Figure : Diagramme UML du pattern Abstract Factory</figcaption>
                </figure>
            </section>

            <section>
                <h3>Code Principal - Abstract Factory</h3>
                
                <h3>1. L'Interface Factory (Le Moteur)</h3>
                <p>C'est le contrat que toutes les usines doivent respecter.</p>
                <pre><code>package ex3A.AbastractFactory;

public interface ProduitFactory {
  Produit creerProduit(String name, int anneeDeParution);
}</code></pre>

                <h3>2. Les Factories Concr√®tes</h3>
                <p>Elles d√©cident quel objet sp√©cifique instancier (Livre ou DVD).</p>
                <pre><code>// --- Usine √† Livres ---
public class LivreFactory implements ProduitFactory {
    @Override
    public Produit creerProduit(String name, int anneeDeParution) {
        return new Livre(name, anneeDeParution);
    }
}

// --- Usine √† DVD ---
public class DVDFactory implements ProduitFactory {
    @Override
    public Produit creerProduit(String name, int anneeDeParution) {
        return new DVD(name, anneeDeParution);
    }
}</code></pre>

                <h3>3. Le Magasin (Composition)</h3>
                <p>Il est g√©n√©rique. Il utilise l'interface inject√©e.</p>
                <pre><code>public class Magasin {
  private Map&lt;String, Produit&gt; stock = new HashMap&lt;&gt;();
  private ProduitFactory factory;

  // Injection : On passe le cerveau (la factory) ici
  public Magasin(ProduitFactory factory) {
    this.factory = factory;
  }

  public void ajouterProduit(String name, int anneeDeParution) {
    Produit produit = factory.creerProduit(name, anneeDeParution);
    stock.put(name, produit);
  }
}</code></pre>

                <h3>4. Main (Utilisation)</h3>
                <p>On configure le <strong>m√™me objet</strong> Magasin avec diff√©rents moteurs.</p>
                <pre><code>// Configuration A : Le magasin vend des Livres
ProduitFactory factoryLivre = new LivreFactory();
Magasin monMagasin = new Magasin(factoryLivre);
monMagasin.ajouterProduit("Le Petit Prince", 1943);

// Configuration B : Le M√äME magasin vend des DVD (changement de factory)
ProduitFactory factoryDVD = new DVDFactory();
monMagasin = new Magasin(factoryDVD); 
monMagasin.ajouterProduit("Inception", 2010);</code></pre>
            </section>


            <section>
                <h3>Diagramme Factory Method (Exercice)</h3>
                <figure style="text-align:center;">
                    <img src="assets/exos/Factorymethod8.png" alt="Factory Method UML Diagram" style="max-width: 100%; height: auto; border: 1px solid #ccc; box-shadow: 2px 2px 8px #eee;">
                    <figcaption>Figure : Diagramme UML du pattern Factory Method</figcaption>
                </figure>
            </section>

            <section>
                <h3>Code Principal - Factory Method</h3>

                <h3>1. La Classe Cr√©ateur Abstraite</h3>
                <p>Elle d√©finit la logique globale mais laisse une m√©thode <code>abstract</code> pour la cr√©ation. C'est le "squelette".</p>
                <pre><code>package ex3A.FactoryMethod;
import java.util.HashMap;
import java.util.Map;

public abstract class CreatorMagasins {

  private Map&lt;String,Produit&gt; etagere = new HashMap&lt;&gt;();

  // LA Factory Method (Abstraite) : Les enfants devront d√©cider
  public abstract Produit creerProduit(String name, int anneeParution);

  public void ajouterLivre(String name, int anneeDeParution){
    // Appel √† la m√©thode abstraite (polymorphisme)
    Produit livre = creerProduit(name, anneeDeParution);
    etagere.put(name,livre);
  }
}</code></pre>

                <h3>2. Les Cr√©ateurs Concrets (H√©ritage)</h3>
                <p>Ici, on est OBLIG√â de cr√©er des classes diff√©rentes pour chaque type de produit.</p>
                <pre><code>// --- Le Magasin SP√âCIALIS√â Livres ---
package ex3A.FactoryMethod;

public class ConcreteCreatorMagasinDeLivre extends CreatorMagasins {
    @Override
    public Produit creerProduit(String name, int anneeParution) {
        // La d√©cision est cod√©e en dur ici
        return new Livre(name, anneeParution);
    }
}

// --- Le Magasin SP√âCIALIS√â DVD ---
package ex3A.FactoryMethod;

public class ConcreteCreatorMagasinDeDVD extends CreatorMagasins {
    @Override
    public Produit creerProduit(String name, int anneeParution) {
        // La d√©cision est cod√©e en dur ici
        return new DVD(name, anneeParution);
    }
}</code></pre>

                <h3>3. Main (Utilisation)</h3>
                <p>Contrairement √† l'Abstract Factory, ici on instancie des <strong>classes diff√©rentes</strong> (Rupture).</p>
                <pre><code>package ex3A.FactoryMethod;

public class Main {
  public static void main(String[] args) {

    // CAS 1 : Magasin de DVD (Classe sp√©cifique)
    ConcreteCreatorMagasinDeDVD magasinDvd = new ConcreteCreatorMagasinDeDVD();
    System.out.println("--- Utilisation du Magasin de DVD ---");
    
    Produit p1 = magasinDvd.creerProduit("Inception", 2010);
    System.out.println("Cr√©√© : " + p1.getName());


    // CAS 2 : Magasin de Livre (Nouvelle Classe obligatoire)
    ConcreteCreatorMagasinDeLivre magasinLivre = new ConcreteCreatorMagasinDeLivre();
    System.out.println("\n--- Utilisation du Magasin de Livre ---");
    
    Produit p2 = magasinLivre.creerProduit("Le Petit Prince", 1943);
    System.out.println("Cr√©√© : " + p2.getName());
  }
}</code></pre>
            </section>

            <section>
                <h3>Abstract Factory vs Factory Method : La Preuve par la Console</h3>
                
                <div style="background-color: #e8f5e9; padding: 15px; margin-bottom: 20px; border-left: 5px solid #4caf50;">
                    <h4>1. Abstract Factory (Composition)</h4>
                    <p><em>On garde la m√™me instance de classe, on change juste sa configuration.</em></p>
                    <pre style="background-color: #1e1e1e; color: #4caf50;">
=== AVANTAGE ABSTRACT FACTORY : Un Magasin Commun ===
Magasin configur√© Livres -> Le Petit Prince
Magasin configur√© DVD    -> Inception</pre>
                    <p><strong>Analyse :</strong> C'est la <strong>CONTINUIT√â</strong>. Le code montre un seul bloc logique. Le <code>Magasin</code> est une coquille vide qui accepte n'importe quel moteur.</p>
                </div>

                <div style="background-color: #ffebee; padding: 15px; margin-bottom: 20px; border-left: 5px solid #f44336;">
                    <h4>2. Factory Method (H√©ritage)</h4>
                    <p><em>On est oblig√© de d√©truire l'objet pr√©c√©dent et d'en cr√©er un nouveau d'une autre classe.</em></p>
                    <pre style="background-color: #1e1e1e; color: #f44336;">
--- Utilisation du Magasin de DVD ---
Cr√©ation r√©ussie : Inception

--- Utilisation du Magasin de Livre ---
Cr√©ation r√©ussie : Le Petit Prince</pre>
                    <p><strong>Analyse :</strong> C'est la <strong>RUPTURE</strong>. Le code montre deux blocs s√©par√©s. On ne peut pas transformer un <code>MagasinDeDVD</code> en <code>MagasinDeLivre</code>, il faut changer de voiture.</p>
                </div>

                <h3>R√©sum√© Flash</h3>
                <ul>
                    <li><strong>Abstract Factory</strong> = <code>new Magasin(new Factory())</code> <br>üëâ Tu changes le <strong>moteur</strong> (param√®tre).</li>
                    <li><strong>Factory Method</strong> = <code>new MagasinSpecialise()</code> <br>üëâ Tu changes la <strong>voiture</strong> (classe).</li>
                </ul>
            </section>
        </main>
    </div>
</body>
</html>